<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    const _data = `[{"id":"tfMvNVVMNUbNJNk7XH9y-11","no":1,"department":"招生就业处","position":"处长","step":"根据各省学生成绩确定投档比例","step_type":"2","description":"","dashed":true,"risk_point":true,"control_point":false,"point_no":"1","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-12","no":2,"step":"主管校领导审批","description":""}],"next_step_no":2,"next_id":"tfMvNVVMNUbNJNk7XH9y-12","document":"","remark":"1.本流程图管理依据：无。","risk_point_no":"1"},{"id":"tfMvNVVMNUbNJNk7XH9y-12","no":2,"department":"校领导","position":"","step":"主管校领导审批","step_type":"3","description":"通过","dashed":true,"risk_point":false,"control_point":true,"point_no":"1.1","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-13","no":3,"step":"登陆各省招生录取系统下载考生投档信息","description":"通过"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-11","no":1,"step":"根据各省学生成绩确定投档比例","description":"不通过"}],"next_step_no":3,"next_id":"tfMvNVVMNUbNJNk7XH9y-13","document":"","remark":"","control_point_no":"1.1"},{"id":"tfMvNVVMNUbNJNk7XH9y-13","no":3,"department":"招生就业处","position":"招生数据岗","step":"登陆各省招生录取系统下载考生投档信息","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-14","no":4,"step":"核对/调整招生计划","description":""}],"next_step_no":4,"next_id":"tfMvNVVMNUbNJNk7XH9y-14","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-14","no":4,"department":"招生就业处","position":"招生计划岗","step":"核对/调整招生计划","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-15","no":5,"step":"设定分档模块进行专业分档","description":""}],"next_step_no":5,"next_id":"tfMvNVVMNUbNJNk7XH9y-15","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-15","no":5,"department":"招生就业处","position":"招生计划岗","step":"设定分档模块进行专业分档","step_type":"2","description":"","dashed":true,"risk_point":true,"control_point":false,"point_no":"2","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-16","no":6,"step":"设定专业调剂优先顺序，进行专业调剂","description":""}],"next_step_no":6,"next_id":"tfMvNVVMNUbNJNk7XH9y-16","document":"","remark":"","risk_point_no":"2"},{"id":"tfMvNVVMNUbNJNk7XH9y-16","no":6,"department":"招生就业处","position":"招生计划岗","step":"设定专业调剂优先顺序，进行专业调剂","step_type":"2","description":"","dashed":true,"risk_point":true,"control_point":false,"point_no":"3","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-17","no":7,"step":"复核组复核","description":""}],"next_step_no":7,"next_id":"tfMvNVVMNUbNJNk7XH9y-17","document":"","remark":"","risk_point_no":"3"},{"id":"tfMvNVVMNUbNJNk7XH9y-17","no":7,"department":"招生就业处","position":"","step":"复核组复核","step_type":"3","description":"通过","dashed":true,"risk_point":false,"control_point":true,"point_no":"3.1","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-18","no":8,"step":"发档到阅档组","description":"通过"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-16","no":6,"step":"设定专业调剂优先顺序，进行专业调剂","description":"不通过"}],"next_step_no":8,"next_id":"tfMvNVVMNUbNJNk7XH9y-18","document":"","remark":"","control_point_no":"3.1"},{"id":"tfMvNVVMNUbNJNk7XH9y-18","no":8,"department":"招生就业处","position":"招生数据岗","step":"发档到阅档组","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-19","no":9,"step":"阅档组审核","description":""}],"next_step_no":9,"next_id":"tfMvNVVMNUbNJNk7XH9y-19","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-19","no":9,"department":"招生就业处","position":"","step":"阅档组审核","step_type":"3","description":"通过","dashed":true,"risk_point":false,"control_point":true,"point_no":"2.1","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-20","no":10,"step":"形成拟录取、录退意见","description":"通过"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-15","no":5,"step":"设定分档模块进行专业分档","description":"不通过"}],"next_step_no":10,"next_id":"tfMvNVVMNUbNJNk7XH9y-20","document":"","remark":"","control_point_no":"2.1"},{"id":"tfMvNVVMNUbNJNk7XH9y-20","no":10,"department":"招生就业处","position":"招生计划岗","step":"形成拟录取、录退意见","step_type":"2","description":"","dashed":true,"risk_point":true,"control_point":false,"point_no":"4","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-21","no":11,"step":"处长审核","description":""}],"next_step_no":11,"next_id":"tfMvNVVMNUbNJNk7XH9y-21","document":"","remark":"","risk_point_no":"4"},{"id":"tfMvNVVMNUbNJNk7XH9y-21","no":11,"department":"招生就业处","position":"","step":"处长审核","step_type":"3","description":"通过","dashed":true,"risk_point":false,"control_point":true,"point_no":"4.1","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-22","no":12,"step":"主管校领导审批","description":"通过"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-20","no":10,"step":"形成拟录取、录退意见","description":""}],"next_step_no":12,"next_id":"tfMvNVVMNUbNJNk7XH9y-22","document":"","remark":"","control_point_no":"4.1"},{"id":"tfMvNVVMNUbNJNk7XH9y-22","no":12,"department":"校领导","position":"","step":"主管校领导审批","step_type":"3","description":"通过","dashed":true,"risk_point":false,"control_point":true,"point_no":"4.2","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-23","no":13,"step":"提交录取、录退数据，报各省招办审批","description":"通过"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-20","no":10,"step":"形成拟录取、录退意见","description":"不通过"}],"next_step_no":13,"next_id":"tfMvNVVMNUbNJNk7XH9y-23","document":"","remark":"","control_point_no":"4.2"},{"id":"tfMvNVVMNUbNJNk7XH9y-23","no":13,"department":"招生就业处","position":"招生数据岗","step":"提交录取、录退数据，报各省招办审批","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":true,"point_no":"4.3","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-24","no":14,"step":"招生计划是否完成","description":""}],"next_step_no":14,"next_id":"tfMvNVVMNUbNJNk7XH9y-24","document":"","remark":"","control_point_no":"4.3"},{"id":"tfMvNVVMNUbNJNk7XH9y-24","no":14,"department":"招生就业处","position":"","step":"招生计划是否完成","step_type":"3","description":"是","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-25","no":15,"step":"导出录取结果并提供网上查询","description":"是"},{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-15","no":5,"step":"设定分档模块进行专业分档","description":"否"}],"next_step_no":15,"next_id":"tfMvNVVMNUbNJNk7XH9y-25","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-25","no":15,"department":"招生就业处","position":"招生数据岗","step":"导出录取结果并提供网上查询","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-26","no":16,"step":"发放录取通知书","description":""}],"next_step_no":16,"next_id":"tfMvNVVMNUbNJNk7XH9y-26","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-26","no":16,"department":"招生就业处","position":"阅档组审核","step":"发放录取通知书","step_type":"2","description":"","dashed":true,"risk_point":false,"control_point":false,"point_no":"","next_step":[{"checked":1,"id":"tfMvNVVMNUbNJNk7XH9y-27","no":17,"step":"结束","description":""}],"next_step_no":17,"next_id":"tfMvNVVMNUbNJNk7XH9y-27","document":"","remark":""},{"id":"tfMvNVVMNUbNJNk7XH9y-27","no":17,"department":"招生就业处","position":"","step":"结束","step_type":"1","description":"","dashed":false,"risk_point":false,"control_point":false,"point_no":"","next_step":[],"next_step_no":"","next_id":"","document":"","remark":""},{"id":"global_remark","global_remark":"1.本流程图管理依据：无。"}]`
    const data = JSON.parse(_data)
    console.log(data)
    
    const idMap = {}
    let startIndex = 100

    data.forEach(dataItem => {
      const id = dataItem.id
      if (id === 'global_remark') {
        return
      }
      if (!Object.prototype.hasOwnProperty.call(idMap, id)) {
        idMap[id] = startIndex++
      }
      dataItem.id = idMap[id]
    })

    data.forEach(dataItem => {
      const id = dataItem.id
      if (id === 'global_remark') {
        return
      }
      const nextId = dataItem.next_id
      dataItem.next_id = idMap[nextId]

      dataItem.next_step.forEach(nextStepItem => {
        const id = nextStepItem.id
        nextStepItem.id = idMap[id]
      })
    })

    console.log(data)
  </script>
</body>
</html>