<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas id="canvas"></canvas>

  <script>
    // 1. load image
    // 2. get height, width
    // 3. create canvas: PENDING
    // 4. drawImage
    // 5. rotate; the rotate origin?>
    // 6. toDataUrl();

    const rotateImg = async (base64Img) => {
      const { height, width, img } = await getImgRect(base64Img);
      console.log('height: ', height, width, img);

      const _height = width;
      const _width = height;
      // const canvas = document.createElement('canvas');
      const canvas = document.getElementById('canvas');
      canvas.height = _height;
      canvas.width = _width;

      const ctx = canvas.getContext('2d');
      ctx.translate(0, _height);
      ctx.rotate(-Math.PI / 2);
      ctx.drawImage(img, 0, 0, width, height);
      
    }

    const getImgRect = (base64) => {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.src = base64;
        img.onload = (e) => {
          resolve({ height: e.target.height, width: e.target.width, img });
        }
      })
    }

    rotateImg(`data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAADpyaXBl1GLUXxVtmw8+53mO2vPsnk7gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//2Q==`)
  </script>
</body>
</html>