<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function weniLogout(apiSrc) {
        const _iframe = document.getElementById("weni_iframe");
        if (_iframe) {
          document.body.removeChild(_iframe);
        }
        const iframe = document.createElement("iframe");
        iframe.src = apiSrc;
        iframe.id = "weni_iframe";
        iframe.style.height = "0px";
        iframe.style.width = "0px";
        iframe.style.overflow = "hidden";
        document.body.appendChild(iframe);
      }
      // document.body.onbeforeunload = function () {
      //   alert('看看怎么辉辉的法律上飞机客服啊康师傅扩大上飞机啊是就')
      //   console.log('test test')
      // }
      // window.onbeforeunload = beforeUnload;
      // window.onunload = unload;

      // var datafrom = "1111";
      // var gotobaidu = false;
      // function beforeUnload() {
      //   if (confirm(datafrom)) {
      //   } else {
      //     window.location.href = "http://www.baidu.com";
      //   }
      // }
      // function unload() {}
      // window.onbeforeunload = async function (event) {
      //   event.preventDefault();
      //   weniLogout("http://yau.joriving.com/pdf/");
      //   await getSetTimeout(10000);

      //   // debugger;
      //   var event = event || window.event;
      //   // 兼容IE8和Firefox 4之前的版本
      //   if (event) {
      //     event.returnValue = "确定要关闭窗口吗？";
      //   }
      //   // Chrome, Safari, Firefox 4+, Opera 12+ , IE 9+
      //   return "确定要关闭窗口吗>现代浏览器？";
      // };
      function getSetTimeout(milisecond) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve();
          }, milisecond);
        });
      }
      // window.addEventListener('beforeunload', async event => {
      //   debugger;
      //   event.preventDefault();
      //   console.log('good')
      //   weniLogout("http://yau.joriving.com/pdf/")
      //   await getSetTimeout(10000);
      //   let _event = event || window.event;
      //   // 兼容IE8和Firefox 4之前的版本
      //   if (_event) {
      //     _event.returnValue = "确定要关闭窗口吗？";
      //   }
      //   return '确定要关闭？'
      // })
            // window.addEventListener('beforeunload', async event => {
      //   debugger;
      //   event.preventDefault();
      //   console.log('good')
      //   weniLogout("http://yau.joriving.com/pdf/")
      //   await getSetTimeout(10000);
      //   let _event = event || window.event;
      //   // 兼容IE8和Firefox 4之前的版本
      //   if (_event) {
      //     _event.returnValue = "确定要关闭窗口吗？";
      //   }
      //   return '确定要关闭？'
      // })
      localStorage.setItem("abc", 1111);
      window.addEventListener("beforeunload", (event) => {
        localStorage.clear(); // 可以通过设置 localStorage 进行，下一次进入系统时，如果检测到，则进行登出操作 (限制，只能在同一台主机，接口几乎无法调用)
        // Cancel the event as stated by the standard.
        event.preventDefault();
        // Chrome requires returnValue to be set.
        event.returnValue = "";
      });
    </script>
  </body>
</html>
